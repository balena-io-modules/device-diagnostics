# Changelog

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## v4.20.0 - 2020-06-02

 - Detect CPU throttling events [Hugh Brown]

## v4.19.1 - 2020-05-28

 - Check_balenaOS: handle case of multiple upstream hostapps [Matthew McGinn]

## v4.19.0 - 2020-05-28

 - Include count of under-voltage events when reporting problems [Hugh Brown]

## v4.18.0 - 2020-05-28

 - Remove image corruption check, as it is currently too noisy [Hugh Brown]

## v4.17.15 - 2020-05-27

 - Diagnostics: add chronyd logs to output [Matthew McGinn]
 - Meta: fix up inconsistent indentation [Matthew McGinn]

## v4.17.14 - 2020-05-15

 - Codeowners: remove zubairlk [Matthew McGinn]

## v4.17.13 - 2020-05-15

 - Docs: fix up markdown formatting [Matthew McGinn]
 - Balenahup: prepare for resin -> balena rename [Matthew McGinn]

## v4.17.12 - 2020-05-13

 - Balena-engine: add extra debug stacktrace for balena-engine [Matthew McGinn]

## v4.17.11 - 2020-05-13

 - Check_balenaOS: adjust query to reflect public apps (ESR support) [Matthew McGinn]

## v4.17.10 - 2020-05-13

 - Localdisk: select the correct boot media [Matthew McGinn]

## v4.17.9 - 2020-05-07

 - Remove gareth as codeowner of markdown [Matthew McGinn]

## v4.17.8 - 2020-05-07

 - Docs: clarify the nuance surrounding write latency calculations [Matthew McGinn]

## v4.17.7 - 2020-05-05

 - Docs: update check_image_corruption docs to mention timeouts [Matthew McGinn]

## v4.17.6 - 2020-04-29

 - Add documentation for check_image_corruption to diagnostics.md [Hugh Brown]

## v4.17.5 - 2020-04-29

 - Checks: filter null service healthchecks from results [Matthew McGinn]

## v4.17.4 - 2020-04-29

 - TLS: expand allowed bundles to include all available device bundles [Matthew McGinn]

## v4.17.3 - 2020-04-28

 - Checks: clean up rollback notifications [Matthew McGinn]

## v4.17.2 - 2020-04-27

 - Checks: prefix user service checks appropriately [Matthew McGinn]
 - Typo: do a proper comparison not an assignment [Matthew McGinn]

## v4.17.1 - 2020-04-27

 - Meta: add saintaardvark as CODEOWNER [Matthew McGinn]

## v4.17.0 - 2020-04-22

 - Networking: reuse root CA for permitted MiTM [Matthew McGinn]

## v4.16.1 - 2020-04-21

 - Checks: prefix user service checks appropriately [Matthew McGinn]

## v4.16.0 - 2020-04-15

 - Checks: add support for user service health checking [Matthew McGinn]

## v4.15.1 - 2020-04-10

 - Checks: fix up math comparison [Matthew McGinn]

## v4.15.0 - 2020-04-03

 - Container-image-corruption: Add container image corruption checks [Kostas Lekkas]

## v4.14.9 - 2020-04-02

 - Diagnose: add engine journal specifically (omitting user apps) [Matthew McGinn]

## v4.14.8 - 2020-03-24

 - Checks: confirm running supervisor is a released edition and matches API [Matthew McGinn]

## v4.14.7 - 2020-03-23

 - Check_localdisk: add back mistakenly dropped expansion test [Matthew McGinn]

## v4.14.6 - 2020-03-20

 - Check_localdisk: combine a few related tests into holistic local disk check [Matthew McGinn]

## v4.14.5 - 2020-03-13

 - Service-restarts: properly count + track timed out service inspections [Matthew McGinn]

## v4.14.4 - 2020-03-12

 - Meta: update codeowners to include gareth for docs [Matthew McGinn]

## v4.14.3 - 2020-03-05

 - Fs-expansion: only check devices with child partitions [Matthew McGinn]
 - Meta: add note with supported device OS versions [Matthew McGinn]

## v4.14.2 - 2020-02-24

 - Checks: remove legacy check_dns in favor of revamped networking check [Matthew McGinn]

## v4.14.1 - 2020-02-13

 - Os-rollbacks: properly detect either type of rollback [Matthew McGinn]

## v4.14.0 - 2020-02-12

 - Checks: confirm root media has fully expanded [Matthew McGinn]

## v4.13.0 - 2020-02-12

 - Checks: add white/blacklisting for device-specific checks [Matthew McGinn]

## v4.12.5 - 2020-02-11

 - Meta: add note about source of 60 [Matthew McGinn]

## v4.12.4 - 2020-02-04

 - Networking: make test_wifi play nicer with multiple configured ints [Matthew McGinn]

## v4.12.3 - 2020-02-03

 - Docs: add Depends on section, mention some inter-check dependencies [Matthew McGinn]

## v4.12.2 - 2020-01-31

 - Checks: ensure every call to ENG is timed out [Matthew McGinn]

## v4.12.1 - 2020-01-31

 - CI: disable node testing [Matthew McGinn]

## v4.12.0 - 2020-01-31

 - Checks: add catchall networking check [Matthew McGinn]

## v4.11.6 - 2020-01-31

 - Meta: add wrboyce as CODEOWNER [Matthew McGinn]

## v4.11.5 - 2020-01-14

 - Supervisor: time out engine call [Matthew McGinn]

## v4.11.4 - 2020-01-10

 - OS: list failed units in diagnostics [Matthew McGinn]

## v4.11.3 - 2019-12-17

 - Openvpn: properly collect logs from journald [Matthew McGinn]

## v4.11.2 - 2019-12-10

 - Check_memory: restore fallback behavior if a device type does not expose MemAvailable [Matthew McGinn]

## v4.11.1 - 2019-11-26

 - Supervisor: use LISTEN_PORT as sourced from config.json [Matthew McGinn]

## v4.11.0 - 2019-11-26

 - OS: add check for any failed boot/rollback breadcrumbs [Matthew McGinn]

## v4.10.1 - 2019-11-26

 - Dmesg: add full timestamps to output [Matthew McGinn]

## v4.10.0 - 2019-11-19

 - Checks: add temperature > 80C check [Matthew McGinn]

## v4.9.4 - 2019-11-19

 - BalenaOS: warn about a custom device type (custom OS) [Matthew McGinn]

## v4.9.3 - 2019-11-15

 - Container-engine: properly check for aliveness of engine [Matthew McGinn]

## v4.9.2 - 2019-11-07

 - Meta: add some scaffolding for open-sourcing [Matthew McGinn]

## v4.9.1 - 2019-11-06

 - Meta: remove imrehg as codeowner [Matthew McGinn]

## v4.9.0 - 2019-11-04

 - Diagnostics: add ENG volume ls [Matthew McGinn]

## v4.8.3 - 2019-10-28

 - Meta: add zubairlk as codeowner [Matthew McGinn]

## v4.8.2 - 2019-10-21

 - Checks: fix up write latency output typo [Matthew McGinn]

## v4.8.1 - 2019-10-17

 - Docs: update README.md with better hacking instructions [Matthew McGinn]

## v4.8.0 - 2019-10-10

 - Checks: add timeout for ENG inspect [Matthew McGinn]

## v4.7.3 - 2019-10-10

 - Checks: make check_timesync backwards compatible [Matthew McGinn]

## v4.7.2 - 2019-10-10

 - Diagnostics: adjust global timeout to 10s (20s fallback) [Matthew McGinn]

## v4.7.1 - 2019-10-10

 - Checks: use VERSION instead of VERSION_ID for balenaOS compat [Matthew McGinn]

## v4.7.0 - 2019-10-10

 - Diagnostics: pass --no-pager to all systemctl and journalctl calls [Matthew McGinn]

## v4.6.1 - 2019-10-09

 - Docs: remove extraneous parenthesis [Matthew McGinn]

## v4.6.0 - 2019-10-03

 - Checks: add check_timesync to confirm NTP is syncing [Matthew McGinn]

## v4.5.0 - 2019-10-03

 - Checks: confirm that the OS is still accessible remotely [Matthew McGinn]

## v4.4.0 - 2019-09-30

 - Diagnose: get SD card information from /sys [Matthew McGinn]

## v4.3.0 - 2019-09-30

 - Supervisor: refactor diagnostics and checks to use health endpoint [Matthew McGinn]

## v4.2.1 - 2019-09-30

 - Docs: add version info to the docs [Matthew McGinn]

## v4.2.0 - 2019-09-30

 - Checks: check for ENG unclean restart count [Matthew McGinn]

## v4.1.0 - 2019-09-19

 - Checks: clean up bash math for memory + disk checks [Matthew McGinn]

## v4.0.5 - 2019-09-13

 - Docs: correct erroneous check info [Matthew McGinn]

## v4.0.4 - 2019-09-11

 - Service-restarts: reinstate check_service_restarts [Matthew McGinn]

## v4.0.3 - 2019-09-11

 - Docs: check documentation cleanup [Matthew McGinn]

## v4.0.2 - 2019-09-11

 - Diagnostics: remove duplicated supervisor check, add nmcli version [Matthew McGinn]

## v4.0.1 - 2019-09-10

 - UI: small stylistic cleanups [Matthew McGinn]

## v4.0.0 - 2019-09-09

 - Diagnostics: split check and data collection tasks [Matthew McGinn]

## v3.4.0 - 2019-08-20

 - Meta: remove all legacy leech codepaths and config [Matthew McGinn]

## v3.3.0 - 2019-08-20

 - Container-engine: check for service restarts (indicates service restart cycling) [Matthew McGinn]

## v3.2.1 - 2019-08-20

 - Diagnose: remove extra is_mounted function [Matthew McGinn]

## v3.2.0 - 2019-07-17

 - Dmesg: add check for under-voltage warnings [Matthew McGinn]

## v3.1.0 - 2019-06-24

 - Diagnose: add balena system df [Matthew McGinn]

## v3.0.3 - 2019-05-27

 - Ci: fix up broken node12 builds [Matthew McGinn]

## v3.0.2 - 2019-05-27

 - Resin1x: remove spurious undefined resin1x check [Matthew McGinn]

## v3.0.1 - 2019-05-15

 - Networking: add back lost /ping endpoint from api check [Matthew McGinn]

## v3.0.0 - 2019-05-15

 - Diagnostics: remove support for 1.x devices [Matthew McGinn]
 - Diagnose: update backend URL to API_ENDPOINT env var [Matthew McGinn]

## v2.14.0 - 2019-05-02

 - Networking: add 'ifconfig' and 'kill -USR1 dnsmasq' for more flaky network data [Matthew McGinn]

## v2.13.0 - 2019-04-15

 - Diagnostics: add journalctl --list-boots [Matthew McGinn]

## v2.12.0 - 2019-04-13

 - Diagnose: stat resinhup lockfile [Matthew McGinn]

## v2.11.0 - 2019-04-10

 - Diagnostics: improve command formatting to group related commands by subject [Matthew McGinn]

## v2.10.0 - 2019-04-09

 - Refactor leech to be more action-server friendly [Matthew McGinn]

## v2.9.2 - 2019-04-08

 - Diagnose: source /etc/profile first to set path correctly [Matthew McGinn]

## v2.9.1 - 2019-04-02

 - Versionbot: Add CHANGELOG.yml (for nested changelogs) [Will Boyce]

## v2.9.0 - 2019-03-28

 - Warn if any disk takes more than 1s on average to write to [Matthew McGinn]
 - Get any recent (<30d old) resinhup log tails [Matthew McGinn]

## v2.8.2 - 2019-03-28

 - Diagnostics: fix versioning information, add note about failing commands [Matthew McGinn]

## v2.8.1 - 2019-03-26

 - Diagnose: limit btrfs checks to resinOS 1.x devices [Matthew McGinn]

## v2.8.0 - 2019-03-21

 - Add device hardware type to diagnostics [Matthew McGinn]

## v2.7.0 - 2019-03-19

 - Add lsusb output to leech [Matthew McGinn]

## v2.6.2 - 2019-03-19

 - Added df -ih to check inodes space [dt-rush]

## v2.6.1 - 2019-03-09

 - Add CODEOWNERS file [Gergely Imreh]

## v2.6.0 - 2019-02-20

 - Re-use proxy container engine logic [Matthew McGinn]

## v2.5.0 - 2019-02-04

 - Add 'sysctl -a' to leech output [Matthew McGinn]

## v2.4.0 - 2019-02-04

 - Add "uptime" to leech output [Matthew McGinn]

## v2.3.0 - 2019-02-04

 - Get temperature data from all thermal zones [Matthew McGinn]

## v2.2.0 - 2019-02-04

 - Package.json: add private tag for Versionist to be happy [Gergely Imreh]
 - Dependency: add natives module for Node 11 builds [Gergely Imreh]
 - Update resin-settings-client to balena-settings-client to look in the right place for auth tokens [Matthew McGinn]

## v2.1.3 - 2018-03-02

 - Change output file name to be compatible with running on Windows [Gergely Imreh]

## v2.1.2 - 2018-02-13

 - Update tests for CircleCI and switch to v2 [Gergely Imreh]

## v2.1.1 - 2018-02-12

 - Run prettier on the code [Gergely Imreh]

## v2.1.0 - 2018-02-08

 - Updating the diagnostics script, combining fixes and adding balena support [Gergely Imreh]

## v2.0.3 - 2018-02-06

 - Completing Capitano type definitions to let the package be installed [Gergely Imreh]

## v2.0.2 - 2017-12-08

 - Add missing prettier-check for tests [Gergely Imreh]

## v2.0.1 - 2017-12-08

 - Add CI [craig-mulligan]

## v2.0.0 - 2017-12-01

 - Updating versionist configuration for the module change [Gergely Imreh]
 - Add node cli + analytics [craig-mulligan]

## v1.3.0 - 2017-11-24

 - Use the new ssh device access method for leech. [Andreas Fitzek]

## v1.2.0 - 2017-10-30

 - Add a command to inspect all containers on the device [Pablo Carranza Velez]

## v1.1.8 - 2017-08-23

 - Add "-a" to all journalctl commands to show full logs [Gergely Imreh]

## v1.1.7 - 2017-08-16

 - Add .gitattributes to make sure line endings for bash scripts are always linux style [Pagan Gazzard]

## v1.1.6 - 2017-07-24

 - Config.json key filtering rewrite [Gergely Imreh]

## v1.1.5 - 2017-07-24

 - Improving heuristics for btrfs and non-btrfs system checks [Gergely Imreh]

## v1.1.4 - 2017-07-24

 - Fix command listing and exectution [Gergely Imreh]

## v1.1.3 - 2017-07-21

 - Fix typo: wrong docker parameter name [Gergely Imreh]

## v1.1.2 - 2017-07-19

 - Add version check, and bail if not on the latest remote version [Gergely Imreh]

## v1.1.1 - 2017-07-03

 - Add new commands: time sync status and docker stats [Gergely Imreh]

## v1.1.0 - 2017-07-03

 - Add commands to check iptables rules and the supervisor's resolv.conf [Pablo Carranza Velez]

## v1.0.3 - 2017-06-21

 - Do not show keys from config.json in output [Pablo Carranza Velez]

## v1.0.2 - 2017-06-13

 - Versionist support: add config and update changelog header [Gergely Imreh]

## v1.0.1 - 2017-06-13

 - Versionist support: add config and changelog file [Gergely Imreh]
 - Add version info to the output [Gergely Imreh]
 - Add netstat to diagnose.sh [Kostas Lekkas]

## v1.0.0 - 2017-06-09

 - error log: single place to set the error log location [Gergely Imreh]

Previously unversioned, check the commit log for changes!
